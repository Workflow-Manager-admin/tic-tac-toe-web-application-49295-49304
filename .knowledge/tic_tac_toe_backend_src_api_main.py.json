{"is_source_file": true, "format": "Python", "description": "Main backend API setup for a Tic Tac Toe web application using FastAPI. It configures the app, registers routers for authentication, games, and moves; sets up middleware and startup events; and defines endpoints for health checks, game management, and move handling.", "external_files": [".auth", ".database", ".crud", ".schemas", ".models"], "external_methods": ["database.init_db", "crud.create_game", "crud.list_games_for_user", "crud.get_game", "crud.add_move", "crud.list_moves_for_game", "get_db", "get_current_user"], "published": ["app"], "classes": [], "methods": [{"name": "on_startup()", "description": "Creates database tables on application startup.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Returns a simple health status message indicating backend is healthy.", "scope": "", "scopeKind": ""}, {"name": "create_game( game: schemas.GameCreate, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )", "description": "Creates a new game with specified opponent, requires authentication.", "scope": "", "scopeKind": ""}, {"name": "list_my_games( db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )", "description": "Lists all games involving the current user, either as owner or opponent.", "scope": "", "scopeKind": ""}, {"name": "get_game( game_id: int, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )", "description": "Retrieves game details by ID, enforces access control.", "scope": "", "scopeKind": ""}, {"name": "make_move( game_id: int, move: schemas.MoveCreate, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )", "description": "Records a move in a game, enforces user permissions.", "scope": "", "scopeKind": ""}, {"name": "get_moves( game_id: int, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )", "description": "Lists all moves for a specific game, enforces access control.", "scope": "", "scopeKind": ""}], "calls": ["database.init_db", "crud.create_game", "crud.list_games_for_user", "crud.get_game", "crud.add_move", "crud.list_moves_for_game", "get_db", "get_current_user"], "search-terms": ["FastAPI", "Tic Tac Toe", "game creation API", "move handling", "authentication routes", "game listing", "move recording", "startup event", "CORS middleware"], "state": 2, "file_id": 1, "knowledge_revision": 24, "git_revision": "750679d746edc4e92ec0a5d8fefc9d83f9027ffd", "revision_history": [{"8": "f86dbd5bcc6dcc8c6dbe56ac010d51bb76a6e4bf"}, {"17": "f86dbd5bcc6dcc8c6dbe56ac010d51bb76a6e4bf"}, {"20": "750679d746edc4e92ec0a5d8fefc9d83f9027ffd"}, {"24": "750679d746edc4e92ec0a5d8fefc9d83f9027ffd"}], "ctags": [{"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "auth_router", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^from .auth import router as auth_router, get_current_user$/", "language": "Python", "kind": "unknown", "nameref": "unknown:router"}, {"_type": "tag", "name": "create_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def create_game($/", "language": "Python", "kind": "function", "signature": "( game: schemas.GameCreate, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )"}, {"_type": "tag", "name": "game_router", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^game_router = APIRouter(prefix=\"\\/games\", tags=[\"Games\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "get_game", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_game($/", "language": "Python", "kind": "function", "signature": "( game_id: int, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )"}, {"_type": "tag", "name": "get_moves", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def get_moves($/", "language": "Python", "kind": "function", "signature": "( game_id: int, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_my_games", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def list_my_games($/", "language": "Python", "kind": "function", "signature": "( db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )"}, {"_type": "tag", "name": "make_move", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def make_move($/", "language": "Python", "kind": "function", "signature": "( game_id: int, move: schemas.MoveCreate, db: Session = Depends(get_db), current_user: models.User = Depends(get_current_user) )"}, {"_type": "tag", "name": "move_router", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^move_router = APIRouter(prefix=\"\\/moves\", tags=[\"Moves\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "on_startup", "path": "/home/kavia/workspace/code-generation/tic-tac-toe-web-application-49295-49304/tic_tac_toe_backend/src/api/main.py", "pattern": "/^def on_startup():$/", "language": "Python", "kind": "function", "signature": "()"}], "hash": "b91b65ca3cef4ca0b127e73dc134bce9", "format-version": 4, "code-base-name": "tic_tac_toe_backend", "filename": "tic_tac_toe_backend/src/api/main.py", "fields": [{"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "game_router = APIRouter(prefix=\"\\/games\", tags=[\"Games\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "move_router = APIRouter(prefix=\"\\/moves\", tags=[\"Moves\"])", "scope": "", "scopeKind": "", "description": "unavailable"}]}